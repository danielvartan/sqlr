type = data$type[i],
id = data$id[i],
sheet = data$sheet[i])
}
sheets <- list()
for (i in seq_len(nrow(data))) {
sheets[[data$name[i]]] <- list(name = data$name[i],
type = data$type[i],
id = data$id[i],
sheet = data$sheet[i])
}
sheets$provider_tags$id
sheets$provider_tags$type
sqlr::sheets$domain$id
sheets$domain$id
sheets <- function(id, sheet = "Dataset", write = FALSE) {
checkmate::assert_string(id)
checkmate::assert_string(sheet)
checkmate::assert_flag(write)
data <- googlesheets4::read_sheet(id, sheet, col_types = "c")
data <- data %>%
dplyr::filter(!(name == "operators")) %>%
dplyr::mutate(across(where(is.character), stringr::str_squish))
sheets <- list()
for (i in seq_len(nrow(data))) {
sheets[[data$name[i]]] <- list(name = data$name[i],
type = data$type[i],
id = data$id[i],
sheet = data$sheet[i])
}
if (isTRUE(write)) {
if(!(dir.exists("./data/"))) dir.create("./data/")
usethis::use_data(sheets, overwrite = TRUE)
}
invisible(sheets)
}
sheets(id, write = TRUE)
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
sheets
sheet_id("domain")
devtools::load_all(".")
sheet_id("domain")
class(sheet_id("domain"))
sheet_id()
keyword_set(1, "english")
names(sheets)
sheets$doam
sheets$domain
test <- read_sheet()
devtools::load_all(".")
test <- read_sheet()
?purr::discard
?purrr::discard
purrr::discard(sheets, sheets$type == "Tag")
list(a = "a", b = NULL, c = integer(0), d = NA, e = list()) %>%
compact()
library(purrr)
dplyr::filter(!(type == "Tags"))
list(a = "a", b = NULL, c = integer(0), d = NA, e = list()) %>%
compact()
sheets
sheets[-"domain"]
sheets[-domain]
sheets[[-domain]]
sheets[domain]
sheets["domain"]
sheets[-"domain"]
sheets[!"domain"]
sheets["domain"] <- NULL
sheets
names(sheets)
devtools::load_all(".")
test <- read_sheet()
for (i in sheets) {
if (i$type == "Tags") {
sheets <- sheets[i$name] <- NULL
}
}
i
i$type == "Tags"
i <- sqlr::sheets$provider_tags
i$type == "Tags"
i$name
sheets <- sqlr::sheets
bkp <- sheets
sheets[i$name] <- NULL
sheets
devtools::load_all(".")
test <- read_sheet()
devtools::load_all(".")
write_metadata()
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
test <- write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
test
devtools::load_all(".")
write_metadata()
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
devtools::load_all(".")
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
id <- "1ljlhZ5r5DozohySGFiGUPI1MDQehjnSR3tlXTqmdt48"
id <- "1ljlhZ5r5DozohySGFiGUPI1MDQehjnSR3tlXTqmdt48"
data <- googlesheets4::read_sheet(id, "APA", col_types = "c")
data
as.list(data)
devtools::load_all(".")
sheet_id()
devtools::load_all(".")
sheet_id()
devtools::load_all(".")
sheet_id()
devtools::load_all(".")
sheet_id()
write_metadata()
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
devtools::load_all(".")
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
devtools::load_all(".")
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
devtools::load_all(".")
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
source('C:/Midia/GitHub/sqlr/data-raw/provider_tags.R')
provider_tags()
test <- provider_tags()
test
devtools::load_all(".")
test <- provider_tags()
source('C:/Midia/GitHub/sqlr/data-raw/provider_tags.R')
test <- provider_tags()
source('C:/Midia/GitHub/sqlr/data-raw/provider_tags.R')
test <- provider_tags()
test
devtools::load_all(".")
test <- provider_tags()
View(test)
source('C:/Midia/GitHub/sqlr/data-raw/provider_tags.R')
test <- provider_tags()
View(test)
test 2 <- sqlr::provider_tags
test_2 <- sqlr::provider_tags
test_2 <- sqlr::tags
View(test_2)
test$apa[["Any Field"]]
test$apa["Any Field"]
test$apa
grep("^Abstract$", test$apa)
test$apa[grep("^Abstract$", test$apa)]
source('C:/Midia/GitHub/sqlr/data-raw/provider_tags.R')
test <- provider_tags()
View(test)
test$apa
provider_tags(TRUE)
args(checkmate::assert_data_frame)
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
source('C:/Midia/GitHub/sqlr/R/query.R')
devtools::load_all(".")
query("Lorem", "AND", "Ipsum", "NOT", "dolor", provider = "EMBASE",
constraint = c("title", "abstract"), clipboard = FALSE)
devtools::load_all(".")
query("Lorem", "AND", "Ipsum", "NOT", "dolor", provider = "EMBASE",
constraint = c("title", "abstract"), clipboard = FALSE)
devtools::load_all(".")
query("Lorem", "AND", "Ipsum", "NOT", "dolor", provider = "EMBASE",
constraint = c("title", "abstract"), clipboard = FALSE)
debugonce(get_tag)
query("Lorem", "AND", "Ipsum", "NOT", "dolor", provider = "EMBASE",
constraint = c("title", "abstract"), clipboard = FALSE)
constraint
data
grep(pattern, tolower(data$name)
)
index <- grep(pattern, tolower(data$name))
index <- grep(pattern, tolower(data$name))
data$tag[index]
devtools::load_all(".")
query("Lorem", "AND", "Ipsum", "NOT", "dolor", provider = "EMBASE",
constraint = c("title", "abstract"), clipboard = FALSE)
query("Lorem", "Ipsum, dolor", "sit", provider = "PubMed",
constraint = c("title", "abstract"), clipboard = FALSE)
query(keyword_set(1, "english"), "AND", keyword_set(2, "english"),
provider = "wos", constraint = c("title", "abstract", "keyword"))
View(provider_tags)
sheets
sheet_id()
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
devtools::load_all(".")
sheets
sheets
source('C:/Midia/GitHub/sqlr/data-raw/provider_tags.R')
provider_tags(TRUE)
devtools::load_all(".")
View(provider_tags)
query("Lorem", "Ipsum, dolor", "sit", provider = "PubMed",
constraint = c("title", "abstract"), clipboard = FALSE)
query("Lorem", "AND", "Ipsum", "NOT", "dolor", provider = "EMBASE",
constraint = c("title", "abstract"), clipboard = FALSE)
query(keyword_set(1, "english"), "AND", keyword_set(2, "english"),
provider = "wos", constraint = c("title", "abstract", "keyword"))
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
write_sheet()
sheet_id()
sheet_id("domain")
sheet_id()
sheet_id("sheets")
args(googlesheets4::read_sheet)
devtools::load_all(".")
test <- read_sheet()
test <- googlesheets4::read_sheet(sheets$domain$id, sheets$domain$sheet)
test <- googlesheets4::read_sheet(sheets$source$id, sheets$source$sheet)
View(test)
names(sheets)
devtools::load_all(".")
test <- read_sheet()
sheets$search
test <- googlesheets4::read_sheet(sheets$search$id, sheets$search$sheet)
test <- googlesheets4::read_sheet("1yZCRt3G94JS73T55rGCxdgUHrKsM6QX6RHSeRUxe3J4", "Dataset")
test <- googlesheets4::read_sheet("1yZCRt3G94JS73T55rGCxdgUHrKsM6QX6RHSeRUxe3J4", "Codebook")
test <- googlesheets4::read_sheet("19reWKICb7DyYf5fk7Qzbmdhcy58R7bqMAqijZHo7esA", "Codebook")
test <- googlesheets4::read_sheet("19reWKICb7DyYf5fk7Qzbmdhcy58R7bqMAqijZHo7esA", "Codebook")
write_metadata()
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
test <- googlesheets4::read_sheet("19reWKICb7DyYf5fk7Qzbmdhcy58R7bqMAqijZHo7esA", "Codebook")
test <- googlesheets4::read_sheet("19reWKICb7DyYf5fk7Qzbmdhcy58R7bqMAqijZHo7esA", "Codebook")
test <- googlesheets4::read_sheet("19reWKICb7DyYf5fk7Qzbmdhcy58R7bqMAqijZHo7esA", "Codebook")
debugonce(cellranger::cell_limit)
test <- googlesheets4::read_sheet("19reWKICb7DyYf5fk7Qzbmdhcy58R7bqMAqijZHo7esA", "Codebook")
sheets
write_metadata()
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
devtools::load_all(".")
sheets
test <- googlesheets4::read_sheet("19reWKICb7DyYf5fk7Qzbmdhcy58R7bqMAqijZHo7esA", "Codebook")
test <- googlesheets4::read_sheet("19reWKICb7DyYf5fk7Qzbmdhcy58R7bqMAqijZHo7esA", "Codebook")
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Test")
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
devtools::load_all(".")
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
?cellranger::cell_limits()
debugonce(cellranger::cell_limits)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
lr
sheet
debugonce(cellranger::cell_limits)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
sheet <- "Documentation"
debugonce(googlesheets4::read_sheet)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
sheet
debugonce(googlesheets4::read_sheet)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
debugonce(googlesheets4:::get_cells)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
sheet
debugonce(googlesheets4::read_sheet)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
debugonce(googlesheets4::get_cells)
debugonce(googlesheets4:::get_cells)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
debugonce(googlesheets4::get_cells)
debugonce(googlesheets4::read_sheet)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
debugonce(googlesheets4:::gs4_get)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
debugonce(googlesheets4:::new_googlesheets4_spreadsheet)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
x
sheets
protected_ranges
debugonce(googlesheets4:::new_googlesheets4_spreadsheet)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
named_ranges
named_ranges
debugonce(googlesheets4:::new_googlesheets4_spreadsheet)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
?puurr:pmap_char
?puurr:pmap
?purrr::pmap_chr
named_ranges
View(x)
debugonce(googlesheets4:::new_googlesheets4_spreadsheet)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
named_ranges
View(named_ranges)
debugonce(googlesheets4:::make_cell_range)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
debugonce(googlesheets4:::make_cell_range)
debugonce(googlesheets4:::make_cell_range)
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
test <- googlesheets4::read_sheet("1ArsjY34VmqTC90RU6_P0vU67k7x4pkai8mlLqhZdJOA", "Documentation")
test <- googlesheets4::read_sheet("1yZCRt3G94JS73T55rGCxdgUHrKsM6QX6RHSeRUxe3J4", "Documentation")
test <- googlesheets4::read_sheet("1yZCRt3G94JS73T55rGCxdgUHrKsM6QX6RHSeRUxe3J4", "Documentation")
write_metadata()
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
test <- read_sheet()
devtools::load_all(".")
test <- read_sheet()
test
devtools::load_all(".")
test <- read_sheet()
test
devtools::load_all(".")
test <- read_sheet()
test
sheets
names(sheets)
debugonce(read_sheet)
test <- read_sheet()
test <- mget(ls())
View(test)
names(sheets)
devtools::load_all(".")
test <- read_sheet()
devtools::load_all(".")
test <- read_sheet()
View(test)
test <- read_sheet("domain")
View(test)
sheets$search$id
names(sheets)
names(sheets)[-"sheets"]
?stringr::str_extract
stringr::str_subset(names(sheet), "^sheet$", negate = TRUE))
stringr::str_subset(names(sheet), "^sheet$", negate = TRUE)
stringr::str_subset(names(sheet), "^sheets$", negate = TRUE)
names(sheet)
stringr::str_subset(names(sheets), "^sheets$", negate = TRUE)
stringr::str_subset(names(sheets), "^sheetsa$", negate = TRUE)
stringr::str_subset(names(sheets), "^sheets$", negate = TRUE)
devtools::load_all(".")
test <- read_sheet()
View(test)
write_sheet("sheet")
write_sheet("sheets")
devtools::load_all(".")
write_sheet()
devtools::load_all(".")
write_sheet()
devtools::load_all(".")
write_sheet()
devtools::load_all(".")
write_sheet()
devtools::load_all(".")
write_sheet()
sheets
write_metadata()
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
write_sheet()
devtools::load_all(".")
write_sheet()
sheets
debugonce(write_sheet)
write_sheet()
read_sheet(c(names(sheets)[1], names(sheets)[2])
read_sheet(c(names(sheets)[1], names(sheets)[2]))
devtools::load_all(".")
devtools::load_all(".")
read_sheet(c(names(sheets)[1], names(sheets)[2]))
test <- read_sheet(c(names(sheets)[1], names(sheets)[2]))
View(test)
devtools::load_all(".")
write_sheet()
devtools::load_all(".")
write_sheet("domain")
load("C:/Midia/GitHub/sqlr/data/domain.rda")
View(domain)
test  <- read_sheet("domain")
View(test)
devtools::load_all(".")
devtools::load_all(".")
test <- read_sheet("domain")
View(test)
test <- read_sheet(c("domain", "search"))
View(test)
devtools::load_all(".")
write_sheet("domain")
load("C:/Midia/GitHub/sqlr/data/domain.rda")
View(domain)
devtools::load_all(".")
write_sheet(c("domain", "search"))
devtools::load_all(".")
write_sheet(c("domain", "search"))
load("C:/Midia/GitHub/sqlr/data/domain.rda")
load("C:/Midia/GitHub/sqlr/data/search.rda")
View(search)
devtools::load_all(".")
write_sheet()
devtools::load_all(".")
load("C:/Midia/GitHub/sqlr/data/constraint.rda")
View(constraint)
keyword_set(1, "english")
keyword_set(1, "spanh")
keyword_set(1, "spanish")
query(keyword_set(1, "english"), "AND", keyword_set(2, "english"),
provider = "wos", constraint = c("title", "abstract", "keyword"))
raw_data()
raw_data("search_history")
View(provider_tags)
provider_tags[["apa"]][["tag"]]
letters
names(search)
grep(names(search), "^query$")
grep("^query$", names(search))
LETTERS
?LETTERS
LETTERS[grep("^query$", names(search))]
paste0(LETTERS[grep("^query$", names(search))], "2")
devtools::load_all(".")
write_query()
devtools::load_all(".")
write_query()
devtools::load_all(".")
write_query()
source('C:/Midia/GitHub/sqlr/data-raw/provider_tags.R')
provider_tags(TRUE)
devtools::load_all(".")
source('C:/Midia/GitHub/sqlr/data-raw/provider_tags.R')
provider_tags(TRUE)
devtools::load_all(".")
View(provider_tags$apa)
write_query()
devtools::load_all(".")
query("Lorem", "Ipsum, dolor", "sit", provider = "PubMed",
constraint = c("title", "abstract"), clipboard = FALSE)
devtools::load_all(".")
write_sheet()
read_sheet()
write_sheet()
devtools::load_all(".")
write_sheet()
install.packages(c("callr", "cpp11", "gert", "renv", "styler", "tinytex", "validate", "vctrs"))
devtools::install()
devtools::install()
devtools::load_all(".")
message("\n", "Don't forget to run ", "
'devtools::document()' (Ctrl + Shift + D) ",
"and 'devtools::load_all()' (Ctrl + Shift + L).")
message("\n", "Don't forget to run ",
"'devtools::document()' (Ctrl + Shift + D) ",
"and 'devtools::load_all()' (Ctrl + Shift + L).")
message("\n", "Don't forget to run:\n",
"'devtools::document()' (Ctrl + Shift + D) ",
"and 'devtools::load_all()' (Ctrl + Shift + L).")
message("\n", "Don't forget to run:\n\n",
"'devtools::document()' (Ctrl + Shift + D) ",
"and 'devtools::load_all()' (Ctrl + Shift + L).")
message("\n", "Don't forget to run:\n\n",
"'devtools::document()' (Ctrl + Shift + D)\n",
"'devtools::load_all()' (Ctrl + Shift + L).")
message("\n", "Run:\n\n",
"'devtools::document()' (Ctrl + Shift + D)\n",
"'devtools::load_all()' (Ctrl + Shift + L).")
message("\n", "Run (in this order):\n\n",
"'devtools::document()' (Ctrl + Shift + D)\n",
"'devtools::load_all()' (Ctrl + Shift + L).")
message("\n", "Run (in order):\n\n",
"'devtools::document()' (Ctrl + Shift + D)\n",
"'devtools::load_all()' (Ctrl + Shift + L).")
message("\n", "Run:\n\n",
"'devtools::load_all()' (Ctrl + Shift + L)")
message("\n", "Run (in order):\n\n",
"'devtools::document()' (Ctrl + Shift + D)\n",
"'devtools::load_all()' (Ctrl + Shift + L)")
devtools::install()
spelling::spell_check_package()
spelling::spell_check_package()
spelling::spell_check_package()
message("\n", "Run (in order):\n\n",
"devtools::document()\n",
"devtools::load_all()")
message("\n", "Run (in order):\n\n",
"devtools::document()\n",
"devtools::load_all()\n")
message("\n", "Run (in order):\n\n",
"devtools::document()\n",
"devtools::load_all()")
devtools::document()
devtools::load_all()
devtools::load_all(".")
devtools::load_all(".")
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
devtools::load_all(".")
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
devtools::load_all(".")
write_metadata("1x6Aj8cXl9qFtpXq48Q6zdmT-w9EEqNG1iVQcKVRhgKM")
load("C:/Midia/GitHub/sqlr/data/sheets.rda")
View(sheets)
stop("This function requires the 'googlesheets4' ",
"package to run. You can install it by running: \n\n",
'install.packages("googlesheets4")', call. = FALSE)
devtools::install()
path <- "./inst/extdata/citation/"
new_name <- tolower(dir(path))
new_name <- stringr::str_replace_all(new_name, " - ", "_")
new_name <- stringr::str_replace_all(new_name, " ", "-")
file.rename(paste0(path, dir(path)), paste0(path, new_name))
devtools::load_all(".")
test <- require_namespace("test")
test <- require_namespace("sqlr")
is_namespace_loaded
devtools::load_all(".")
devtools::install()
devtools::load_all(".")
install.packages(c("broom", "cli", "gargle", "gh", "processx", "remotes", "reprex"))
install.packages(c("broom", "cli", "gargle", "gh", "processx", "remotes", "reprex"))
install.packages(c("broom", "cli", "gargle", "gh", "processx", "remotes", "reprex"))
devtools::install()
