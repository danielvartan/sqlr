i <_ 1
i <- 1
stop("Some keywords from the domain ", single_quote_(x[i]),
"and language ", single_quote_(language),
"are missing after the keyword tidying process.")
stop("Some keywords from the domain ", single_quote_(x[i]),
" and language ", single_quote_(language),
"are missing after the keyword tidying process.")
stop("Some keywords from the domain ", single_quote_(x[i]),
" and language ", single_quote_(language),
" are missing after the keyword tidying process.")
devtools::load_all(".")
write_query()
domain_set(1, "english")
domain_set("1", "english")
stop("Some keywords from the domain ", single_quote_(x[i]),
" and language ", single_quote_(language),
" are missing after the keyword tidying process.")
set <- keyword_set(as.numeric(x[i]), language, package)
tidy <- tidy_keyword(set)
keyword_set(as.numeric(x[i]), language, package)
package = NULL
keyword_set(as.numeric(x[i]), language, package)
set <- keyword_set(as.numeric(x[i]), language, package)
tidy <- tidy_keyword(set)
length(tidy)
length(set)
length(set) == length(tidy)
set <- keyword_set(as.numeric(x[i]), language, package)
tidy <- tidy_keyword(set)
if (length(set) == length(tidy)) {
stop("Some keywords from the domain ", single_quote_(x[i]),
" and language ", single_quote_(language),
" are missing after the keyword tidying process.")
}
devtools::load_all(".")
write_query()
x <- 2
language <- "portuguese"
set <- keyword_set(as.numeric(x[i]), language, package)
tidy <- tidy_keyword(set)
set
tidy
devtools::load_all(".")
write_sheet()
devtools::load_all(".")
message("\n", "Don't forget to run 'devtools::load_all()' ",
"(Ctrl + Shift + L).")
devtools::load_all(".")
write_query()
devtools::load_all(".")
?write_query
devtools::load_all(".")
write_query()
raw_data()
data(package = "sqlr")
View(search)
class(search$start)
class(search$start)[1]
search$start[1]
lubridate::as_datetime(search$start[1])
lubridate::as_datetime(search$start[1])
synthesisr::code_lookup
dir(system.file("extdata/", package = "sqlr"))
dir(system.file("extdata", package = "sqlr"))
devtools::load_all(".")
alert(test, test1, test2)
alert
debugonce(alert)
alert(test, test1, test2)
assert_has_length(1)
assert_has_length(list(1 = "a"))
assert_has_length(list(cs = "a"))
alert("test", "test1", "test2")
alert("test", "test1", "test2", "\n")
alert("Type of files:\n")
dir(system.file("extdata", package = "sqlr"))
alert("File types:\n")
dir(system.file("extdata", package = "sqlr"))
package <- "sqlr"
type <- "search_history"
path <- paste0("extdata/", type)
dir(system.file(path, package = package))
index <- list(
citation = list(name = "Citation",
path = "extdata/citation"),
search_history = list(name = "Search history",
path = "extdata/search_history")
)
index["citation"]
alert(index[type]$name, " files:", "\n")
index[type]$name
index[type]
index[type]["name"]
index[type][["name"]]
index[[type]][["name"]]
index[[type]]$name
alert(index[[type]]$name, " files:", "\n")
alert(index[[type]]$name, " files:", "\n")
dir(system.file(index[[type]]$path, package = package))
devtools::load_all(".")
raw_data(0)
raw_data()
devtools::load_all(".")
raw_data()
raw_data("test")
raw_data("test", "citation")
devtools::load_all(".")
raw_data("citation")
raw_data("search_history")
test <- raw_data("search_history")
test
devtools::load_all(".")
raw_data("search_history")
raw_data("search_history", quiet = TRUE)
raw_data("search_history", "2019-02-12_search-history_ebscohost_en.pdf", quiet = TRUE)
raw_data("search_history", quiet = TRUE)
raw_data("search_history", quiet = FALSE)
stringr::str_subset(raw_data("citation"), "pubmed")
raw_data("citation")
pubmed_files <- stringr::str_subset(raw_data("citation"), "pubmed")
ebscohost_files <- stringr::str_subset(raw_data(), "ebscohost")
embase_files <- stringr::str_subset(raw_data(), "embase")
lilacs_es_files <- stringr::str_subset(raw_data(), "lilacs_es") # failed
lilacs_pt_files <- stringr::str_subset(raw_data(), "lilacs_pt") # failed
psycnet_files <- stringr::str_subset(raw_data(), "psycnet") # failed
scielo_es_files <- stringr::str_subset(raw_data(), "scielo_es")
scielo_pt_files <- stringr::str_subset(raw_data(), "scielo_pt")
scopus_files <- stringr::str_subset(raw_data(), "scopus")
wos_files <- stringr::str_subset(raw_data(), "web-of-science")
pubmed_files <- stringr::str_subset(citation_files, "pubmed")
ebscohost_files <- stringr::str_subset(citation_files, "ebscohost")
embase_files <- stringr::str_subset(citation_files, "embase")
lilacs_es_files <- stringr::str_subset(citation_files, "lilacs_es") # failed
lilacs_pt_files <- stringr::str_subset(citation_files, "lilacs_pt") # failed
psycnet_files <- stringr::str_subset(citation_files, "psycnet") # failed
scielo_es_files <- stringr::str_subset(citation_files, "scielo_es")
scielo_pt_files <- stringr::str_subset(citation_files, "scielo_pt")
scopus_files <- stringr::str_subset(citation_files, "scopus")
wos_files <- stringr::str_subset(citation_files, "web-of-science")
citation_files <- raw_data("citation", quiet = TRUE)
pubmed_files <- stringr::str_subset(citation_files, "pubmed")
ebscohost_files <- stringr::str_subset(citation_files, "ebscohost")
embase_files <- stringr::str_subset(citation_files, "embase")
lilacs_es_files <- stringr::str_subset(citation_files, "lilacs_es") # failed
lilacs_pt_files <- stringr::str_subset(citation_files, "lilacs_pt") # failed
psycnet_files <- stringr::str_subset(citation_files, "psycnet") # failed
scielo_es_files <- stringr::str_subset(citation_files, "scielo_es")
scielo_pt_files <- stringr::str_subset(citation_files, "scielo_pt")
scopus_files <- stringr::str_subset(citation_files, "scopus")
wos_files <- stringr::str_subset(citation_files, "web-of-science")
db <- "pubmed"
path <- "./inst/extdata/citation/"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_ref(files))
db <- "pubmed"
path <- "./inst/extdata/citation/"
files <- paste0(path, get(paste0(db, "_files")))
?synthesisr::read_ref
files
getwd()
dir(path)
synthesisr::read_ref(raw_data("citation"), pubmed_files[1])
raw_data("citation", pubmed_files[1])
synthesisr::read_ref(raw_data("citation", pubmed_files[1]))
test <- synthesisr::read_ref(raw_data("citation", pubmed_files[1]))
View(test)
pubmed_files[1]
names(test)
synthesisr::code_lookup
View(synthesisr::code_lookup)
test <- synthesisr::read_ref(raw_data("citation", pubmed_files[1]), "pubmed")
View(synthesisr::code_lookup)
test <- synthesisr::read_ref(raw_data("citation", wos_files[1]), "wos")
View(test)
test <- synthesisr::read_ref(raw_data("citation", wos_files), "wos")
wos_files <- stringr::str_subset(citation_files, "web-of-science")
raw_data("citation", wos_files[1])
db <- "pubmed"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_ref(files, tag_namming))
pubmed_files
files
db <- "wos"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_ref(files, tag_namming))
db <- "wos"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_refs(files, tag_namming))
View(wos)
x <- c(a = 1, b = 2)
x
change_name(x, "")
devtools::load_all(".")
clear_names(x)
devtools::load_all(".")
clear_names(x)
x
clear_names(x)
assign(db, clear_names(db))
rownames(test)
rownames(test) <- NULL
View(test)
devtools::load_all(".")
db <- "wos"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_refs(files, tag_namming))
assign(db, clear_row_names(get(db)))
View(wos)
?synthesisr::find_duplicates
synthesisr::find_duplicates(get(db)$doi, method = "exact")
unique(synthesisr::find_duplicates(get(db)$doi, method = "exact"))
length(unique(synthesisr::find_duplicates(get(db)$doi, method = "exact")))
doi_match <- synthesisr::find_duplicates(get(db)$doi, method = "exact")
data_unique <- synthesisr::extract_unique_references(get(db), doi_match)
View(data_unique)
seq_along(doi_match)
doi_match[!(doi_match == seq_along(doi_match))]
db <- "ebscohost"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_refs(files, tag_namming))
assign(db, clear_row_names(get(db)))
doi_match <- synthesisr::find_duplicates(get(db)$doi, method = "exact")
doi_match[!(doi_match == seq_along(doi_match))]
View(ebscohost)
db <- "embase"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_refs(files, tag_namming))
assign(db, clear_row_names(get(db)))
db <- "lilacs_es"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_refs(files, tag_namming))
assign(db, clear_row_names(get(db)))
db <- "lilacs_pt"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_refs(files, tag_namming))
assign(db, clear_row_names(get(db)))
db <- "psycnet"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_refs(files, tag_namming))
assign(db, clear_row_names(get(db)))
?readLines
files <- character()
db <- "psycnet"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
i <- 1
files <- append(files, readLines(i, n = inf, ))
files <- append(files, readLines(i))
files <- append(files, readr::read_lines(i))
?readr::read_lines
i <- paste0(path, get(paste0(db, "_files")))[1]
files <- append(files, readr::read_lines(i))
files <- character()
for (i in paste0(path, get(paste0(db, "_files")))) {
files <- append(files, readLines(i))
files <- append(files, readLines(i))
?readLines
read <- readr::read_lines(i, skip = 4)
?synthesisr::read_refs()
tempfile()
db <- "psycnet"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
if (db == "psycnet") {
data <- character()
for (i in paste0(path, get(paste0(db, "_files")))) {
read <- readr::read_lines(i, skip = 4)
data <- append(files, read)
}
files <- tempfile()
writeLines(data, files)
} else {
files <- paste0(path, get(paste0(db, "_files")))
}
files
assign(db, synthesisr::read_refs(files, tag_namming))
assign(db, clear_row_names(get(db)))
data
x <- c("1", "2", "")
x
c(x, "")
devtools::load_all()
citation_files <- raw_data("citation", quiet = TRUE)
pubmed_files <- stringr::str_subset(citation_files, "pubmed")
ebscohost_files <- stringr::str_subset(citation_files, "ebscohost")
embase_files <- stringr::str_subset(citation_files, "embase")
lilacs_es_files <- stringr::str_subset(citation_files, "lilacs_es")
lilacs_pt_files <- stringr::str_subset(citation_files, "lilacs_pt")
psycnet_files <- stringr::str_subset(citation_files, "psycnet") # failed
scielo_es_files <- stringr::str_subset(citation_files, "scielo_es")
scielo_pt_files <- stringr::str_subset(citation_files, "scielo_pt")
scopus_files <- stringr::str_subset(citation_files, "scopus")
wos_files <- stringr::str_subset(citation_files, "web-of-science")
# test <- synthesisr::read_ref(raw_data("citation", wos_files[1]), "wos")
db <- "psycnet"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
if (db == "psycnet") {
data <- character()
for (i in paste0(path, get(paste0(db, "_files")))) {
read <- readr::read_lines(i, skip = 4)
data <- append(files, read)
}
if (!(data[length(data)] == "")) data <- c(data, "")
files <- tempfile()
writeLines(c(data), files)
} else {
files <- paste0(path, get(paste0(db, "_files")))
}
data <- character()
for (i in paste0(path, get(paste0(db, "_files")))) {
read <- readr::read_lines(i, skip = 4)
data <- append(files, read)
}
if (db == "psycnet") {
data <- character()
for (i in paste0(path, get(paste0(db, "_files")))) {
read <- readr::read_lines(i, skip = 4)
data <- append(data, read)
}
if (!(data[length(data)] == "")) data <- c(data, "")
files <- tempfile()
writeLines(c(data), files)
} else {
files <- paste0(path, get(paste0(db, "_files")))
}
assign(db, synthesisr::read_refs(files, tag_namming))
files
normalizePath(files)
?normalizePath
normalizePath(files, "")
/
normalizePath(files, "/")
normalizePath(files, "\")
normalizePath(files, "\\")
cat(normalizePath(files, "\\"))
x <- c(1, 2)
x[1]
x[-1]
x[-length(x)]
if (db == "psycnet") {
data <- character()
for (i in paste0(path, get(paste0(db, "_files")))) {
read <- readr::read_lines(i, skip = 4)
data <- append(data, read)
}
if (data[length(data)] == "") data <- data[-length(data)]
files <- tempfile()
writeLines(c(data), files)
} else {
files <- paste0(path, get(paste0(db, "_files")))
}
assign(db, synthesisr::read_refs(files, tag_namming))
normalizePath("C:\Users\Daniel\Desktop")
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file)
x
x[1:(numeric())]
x[1:(numeric()) - 1]
x[1:("a") - 1]
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file)
test <- synthesisr::read_ref(raw_data("citation", wos_files[1]), "wos")
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file)
debugonce(synthesisr::read_ref)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "none")
test <- synthesisr::read_ref(raw_data("citation", wos_files[1]), "none")
names(test)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "none")
debugonce(synthesisr::read_ref)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "none")
debugonce(synthesisr::read_ref)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "none")
debugonce(synthesisr::read_ref)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "none")
debugonce(synthesisr::parse_pubmed)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "none")
debugonce(synthesisr::parse_pubmed)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "none")
debugonce(synthesisr::detect_delimiter)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "none")
debugonce(synthesisr::prep_ris)
debugonce(synthesisr:::prep_ris)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "none")
View(z_dframe)
end_rows <- 22
View(test)
debugonce(synthesisr:::prep_ris)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "none")
View(z_dframe)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "wos")
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file, "ovid")
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file)
db <- "scielo_es"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_refs(files, tag_namming))
assign(db, clear_row_names(get(db)))
View(scielo_es)
db <- "scielo_pt"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_refs(files, tag_namming))
assign(db, clear_row_names(get(db)))
db <- "scopus"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_refs(files, tag_namming))
assign(db, clear_row_names(get(db)))
db <- "wos"
path <- "./inst/extdata/citation/"
choices <- c("wos", "scopus", "ovid", "asp", "synthesir")
tag_namming <- if (db %in% choices) db else "best_guess"
files <- paste0(path, get(paste0(db, "_files")))
assign(db, synthesisr::read_refs(files, tag_namming))
assign(db, clear_row_names(get(db)))
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file)
seq(1, -2)
?seq_len
seq_len(x)
x
seq_len(5)
seq_len(-1)
seq_len(0)
names(wos)
names(scopus)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file)
file <- "C:\\Users\\Daniel\\Desktop\\PsycNET_Export.ris"
test <- synthesisr::read_ref(file)
raw_data()
raw_data("search_history")
raw_data("citation")
names(search)
devtools::load_all(".")
write_query()
devtools::load_all(".")
write_query()
devtools::load_all(".")
write_query()
devtools::load_all(".")
tidy_keyword("Lorem", "Ipsum*", clean_modifiers = TRUE, na_rm = FALSE)
tidy_keyword("Lorem", "Ipsum, dolor", delimiter = ",")
tidy_keyword("Lorem", "Ipsum dolor", c("sit", "amet"))
tidy_keyword("Lorem", "Ipsum dolor", c("sit", "amet"), sort = TRUE)
devtools::load_all(".")
tidy_keyword("Lorem", "Ipsum dolor", c("sit", "amet"), sort = TRUE)
devtools::load_all(".")
tidy_keyword("Lorem", "Ipsum dolor", c("sit", "amet"), sort = TRUE)
write_query()
write_query()
write_query()
write_query()
!is_namespace_loaded("utils")
!is_namespace_loaded("magrittr")
!is_namespace_loaded("googlesheets4")
devtools::load_all(".")
write_query()
